<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>D3.js Slider Examples</title>
  <link rel="stylesheet" href="d3.slider.css" />  
  <style>
  div{
    font-family:"Mercury";
  }
  img{
    max-width: 100%;
    height: auto;
  }

  .artwork_text{
    text-align: center;
    margin: 0px;
    font-size:xx-small;
  }

  h{
    text-align:"left";
  }
  p {
    font-size: small;
    font-weight: 200;
    margin:0px;
    /* line-height: 1.8; */
  }

  #scroller{
    position: fixed;
  }

  .col-12{
    padding:0px;
  }

  .title
  {
    text-align: left;
  font-size: 40px;
}

.row{
  padding:0px;
}
.col-3
{
  padding:0px;
}
  
  .c3-axis{
    visibility: hidden;
  }
  </style>

 
</head>
<body>
  <div class = "container">
    <div class = "row">
    <div class = "col-12">
    <h class= "title"> Do Album Covers Fall into Artistic Style Genres?</h>
    </div>
    </div>
    </div>
<select id= "musiclist" >

  <!-- and so on... -->
</select>

  <div  class="container" style="width:100%; max-width:100%; ">
      <div class = "row">
        <div class="col-8">
        </div>
        <div id="chart1-style" class="col-4">
        </div>
      </div>
      <div class="row" >
        <div class="col-2">
          <div id="one"> 
              <div class="fitter">
              <p><b>ALBUM</b></p>
                    <img id = "album"  /> <br/>
                      <p id="album_artist"> test </p>
                     <i><p id = "album_name" > test </p> </i>
                     <p id = "album_genre" > test </p>
                     <i><p id = "album_year" > test </p> </i>
              </div>  
          </div>
        </div>
        <div class="col-6">
          <div id='chart'></div>
        </div>
        <div class="col-4">
        <div class="container" style="width:100%; max-width:100%">
          <div class="row">
            <div class="col-6">
               <div >
                <img  id = 'i4' style='height: 150px; width: 100%; object-fit: contain' src="/blank.png" /> 
                <div class = "artwork_text">
                  <p id = 't4_artist'> </p>
                  <i><p id = 't4_title'>  </p> </i>
                  <p id = 't4_style'> </p>
                  <i> <p id = 't4_year'>  </p> </i>
                </div>
             </div> 
            </div>
            <div class="col-6">
              <div >
                <img id = 'i1'  style='height: 150px; width: 100%; object-fit: contain' src="/blank.png" />
                <div class = "artwork_text">
                  <p id = 't1_artist'>  </p>
                  <i> <p id = 't1_title'> </p> </i>
                  <p id = 't1_style'> </p>
                  <i><p id = 't1_year'> </p> </i>
                </div>
              </div>  
            </div>
          </div>
          <div class="row">
            <div class="col-6">
              <div >
                <img  id = 'i2' style='height: 150px; width: 100%; object-fit: contain' src="/blank.png" /> 
                <div class = "artwork_text"> 
                  <p id = 't2_artist'>  </p>
                  <i><p id = 't2_title'> </p> </i>
                  <p id = 't2_style'>  </p>
                  <i><p id = 't2_year'>  </p></i> 
                </div>

              </div> 
            </div>
            <div class="col-6">
                <div >
                <img id = 'i3'  style='height: 150px; width: 100%; object-fit: contain' src="/blank.png" />
                <div class = "artwork_text">
                  <p id = 't3_artist'> </p>
                  <i> <p id = 't1_title'>  </p> </i>
                  <p id = 't3_style'>  </p>
                  <i><p id = 't3_year'>  </p> </i>
                </div>
              </div>  
            </div>
          </div>
          </div>
        </div>
      </div>
    </div>
    <div class = "container">
    <div class = "row">
    <div class = "col-12">
    <h class= "title"> Artistic Styles in Album Covers by Musical Genre </h>
    </div>
    </div>
    </div>

    <div class = "container" style="width:100%; max-width:100%; ">
      <div class = "row">
        <div class = "col-8">
          <div class = "container" style="width:100%; max-width:100%">
            <div class = "row">
              <div class = "col-3">
                  <div id = "pie_ambient"> </div>
              </div>
              <div class = "col-3">
                 <div id = "pie_blues"> </div>
              </div>
              <div class = "col-3">
                  <div id = "pie_classical_music"> </div>
              </div>
              <div class = "col-3">
                   <div id = "pie_dance"> </div>
              </div>
            </div>
            <div class = "row">
              <div class = "col-3">
                 <div id = "pie_electronic"> </div>
              </div>
              <div class = "col-3">
                  <div id = "pie_experimental"> </div>
              </div>
              <div class="col-3">
                <div id = "pie_folk"> </div>
              </div>
              <div class="col-3">
                <div id = "pie_hip_hop"> </div>
              </div>
            </div>

            <div class = "row">
              <div class = "col-3">
                <div id = "pie_jazz"> </div>
              </div>
              <div class = "col-3">
                <div id = "pie_metal"> </div>
              </div>
              <div class = "col-3">
                <div id = "pie_new_age"> </div>
              </div>
              <div class = "col-3">
                <div id = "pie_pop"> </div>
              </div>
            </div>
            <div class = "row">
              <div class = "col-3">
                <div id = "pie_punk"> </div>
              </div>
              <div class = "col-3">
                <div id = "pie_pyschedelia"> </div>
              </div>
              <div class = "col-3">
                <div id = "pie_r--b"> </div>
              </div>
              <div class = "col-3">
                <div id = "pie_rock"> </div>
              </div>
            </div>
            <div class = "row">
              <div class = "col-3">
              </div>
              <div class = "col-3">
                <div id = "pie_ska"> </div>
              </div>
              <div class = "col-3">
               <div id = "pie_singervvsongwriter"> </div>
              </div>
              <div class = "col-3">
              </div>
            </div>



          </div>
        </div>
        <div class = "col-4">
        <div id = "scroller" class = "selector" >
          <div class = "container" >
            <div class="row" id="chart2-style">
            </div>
            <div class = "row">
              <div class = "col-6">
                   <div class="fitter" >
                        <img id = "p1_album" src="/blank.png" style='height: 200px; width: 100%; object-fit: contain' /> <br/>
                          <p id="p1_album_artist">  </p>
                         <i><p id = "p1_album_name" >  </p> </i>
                         <i><p id = "p1_album_year" >  </p> </i>
                  </div>  
              </div>
               
              <div class = "col-6">
               
                        <div class="fitter">
                        <img id = "p2_album" src="/blank.png" style='height: 200px; width: 100%; object-fit: contain'/> <br/>
                          <p id="p2_album_artist">  </p>
                         <i><p id = "p2_album_name" >  </p> </i>
                         <i><p id = "p2_album_year" >  </p> </i>
                       
                  </div>  
              </div>
            </div>
            <div class = "row">
              <div class = "col-6">
                  <div class="fitter">
                        <img id = "p3_album" src="/blank.png" style='height: 200px; width: 100%; object-fit: contain' /> <br/>
                          <p id="p3_album_artist">  </p>
                         <i><p id = "p3_album_name" >  </p> </i>
                         <i><p id = "p3_album_year" >  </p> </i>
                       
                  </div>  
              </div>
              <div class = "col-6">
                   <div class="fitter">
                        <img id = "p4_album" src="/blank.png" style='height: 200px; width: 100%; object-fit: contain'/> <br/>
                          <p id="p4_album_artist">  </p>
                         <i><p id = "p4_album_name" >  </p> </i>
                         <i><p id = "p4_album_year" >  </p> </i>
                       
                  </div>  
              </div>
            </div>
        </div >       
        </div>

        </div>
      </div>
    </div>
    <div class="container">     
    <div class = "row">
    <div class = "col-12">
    <h class= "title"> Trends in Album Cover Styles over the Years</h>
    </div>
    </div>
    </div>
    <div class = "container"  style="width:100%; max-width:100%;">

        <div class = "row">
    <div class = "row">
      <div class = "col-8">
        <div id="chart_scatter">
        </div>
      </div>
      <div class = "col-4">
          <div class = "container" >
          <div class = "row">
            <p id = "chart_scatter_over_title"> </p>
          </div>
            <div class = "row">
              <div class = "col-6">
                   <div class="fitter" >
                        <img id = "f1_album" src="/blank.png" style='height: 200px; width: 100%; object-fit: contain' /> <br/>
                          <p id="f1_album_artist">  </p>
                         <i><p id = "f1_album_name" >  </p> </i>
                         <p id = 'f1_style'>  </p>
                         <i><p id = "f1_album_year" >  </p> </i>
                  </div>  
              </div>
               
              <div class = "col-6">
               
                        <div class="fitter">
                        <img id = "f2_album" src="/blank.png" style='height: 200px; width: 100%; object-fit: contain'/> <br/>
                          <p id="f2_album_artist">  </p>
                         <i><p id = "f2_album_name" >  </p> </i>
                         <p id = 'f2_style'>  </p>
                         <i><p id = "f2_album_year" >  </p> </i>
                       
                  </div>  
              </div>
            </div>
            <div class = "row">
              <div class = "col-6">
                  <div class="fitter">
                        <img id = "f3_album" src="/blank.png" style='height: 200px; width: 100%; object-fit: contain' /> <br/>
                          <p id="f3_album_artist">  </p>
                         <i><p id = "f3_album_name" >  </p> </i>
                         <p id = 'f3_style'>  </p>
                         <i><p id = "f3_album_year" >  </p> </i>
                       
                  </div>  
              </div>
              <div class = "col-6">
                   <div class="fitter">
                        <img id = "f4_album" src="/blank.png" style='height: 200px; width: 100%; object-fit: contain'/> <br/>
                          <p id="f4_album_artist">  </p>
                         <i><p id = "f4_album_name" >  </p> </i>
                         <p id = 'f4_style'>  </p>
                         <i><p id = "f4_album_year" >  </p> </i>
                       
                  </div>  
              </div>
            </div>
        </div >     
    </div>
    </div>
    <div class="row" style="padding:100px">
    </div>
    </div>

   
  <link href="c3.css" rel="stylesheet">
  <link href="simple-grid.css" rel="stylesheet">
  <script src="c3.min.js"></script>

  <script src="http://d3js.org/d3.v3.min.js"></script>
  <script src="d3.slider.js"></script>
  <script src="sticky.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>

  $(window).scroll(function(e){ 
  var $el = $('#scroller'); 
  var isPositionFixed = ($el.css('position') == 'fixed');
  if ($(this).scrollTop() > 450 ){ 
    $('#scroller').css({'position': 'fixed', 'top': '200px'}); 
  }
  if ($(this).scrollTop() < 450 && isPositionFixed)
  {
    $('#scroller').css({'position': 'fixed', 'top': 'unset'}); 
  } 
});




  function by_genre(current_map, label){

    var contentid = [];
    var max = [];
    var breakdown = [0,0,0,0];
    var artist = [];
    var title = [];
    var year = [];
    var style = [];
    console.log(label)
    console.log(contentid.length)


    for (var i = 0; i < current_map["style"].length; i++)
    {
      if (contentid.length < 4){
        //console.log(current_map["style"])
        if (current_map["style"][i] == label)
        {
          console.log(current_map["contentId"])
          contentid.push(current_map["contentId"][i]);
          max.push(current_map["scores"][i]);
          artist.push(current_map["artist"][i]);
          title.push(current_map["title"][i]);
          year.push(current_map["year"][i]);
          style.push(current_map["style"][i]);
        }
      }
    }

    return [contentid, max, breakdown, artist, title, year, style]
  }


  
 
  function find_min(current_map)
  {
    var chart = c3.generate({
    data: {
        columns: [
            [200].concat(current_map["style_counts"])
        ],
        type: 'bar',
        onmouseover: function (d) {
            console.log("here")
            ele = by_genre(current_map, current_map["style_labels"][d['x']]);
            update_view(ele);
            d3.select("#chart1-style").text( current_map["style_labels"][d['x']] + " Artwork similar to album cover" );
            //console.log (current_map["style_labels"][d['x']]);
        }
    },
            legend: {
              show: false
            },
    axis: {
        x: {
            type: 'category',
            categories: current_map["style_labels"]
        }
    },
    bar: {
        width: {
            ratio: 0.5 // this makes bar width 50% of length between ticks
        }
        // or
        //width: 100 // this makes bar width 100px
    },
     color: {
            pattern: ["#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E"]
            
          }

}); 


    var contentid = current_map["contentId"].slice(0,4);
    var max = current_map["scores"].slice(0,4);
    var breakdown = [0,0,0,0];
    var artist = current_map["artist"].slice(0,4);
    var title = current_map["title"].slice(0,4);
    var year = current_map["year"].slice(0,4);
    var style = current_map["style"].slice(0,4);

  	return [contentid, max, breakdown, artist, title, year, style]
  }

function loadJSON(callback ,f) {   

   
    	var sent = 0;
    	var xobj = new XMLHttpRequest();
        xobj.overrideMimeType("application/json");
        //console.log(f)
        xobj.open('GET', f, true); // Replace 'my_data' with the path to your file
        xobj.onreadystatechange = function () {
          //console.log('here')
          if (xobj.readyState == 4 && xobj.status == "200") {
            //console.log('heretoo')
            //console.log(xobj.responseText)
            // Required use of an anonymous callback as .open will NOT return a value but simply returns undefined in asynchronous mode
            
            //console.log(xobj.responseText)
            callback(xobj.responseText)
            sent = 200;
          }
          else
          {
            //console.log(xobj.readyState)
            //console.log(xobj.status)
          }
      };
    
    xobj.send(null);  
 }


    var current_map = 2;

function escapeRegExp(str) {
    return str.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
}
  
  function replaceAll(str, find, replace) {
    return str.replace(new RegExp(escapeRegExp(find), 'g'), replace);
}

  function afterInit(callback_, path){
    //console.log(actual_JSON)
    var path = "/analysis/res_res/"+path +'.json';
    //console.log(actual_JSON[Object.keys(actual_JSON)[1]]['coverpath']);
    console.log(path);
    d3.json(path, function(data) {
    	//console.log(data);
    	current_map = data;
    	console.log('loaded new json');
    	callback_(current_map);
  			
	});
    /*loadJSON(function(response) {
  // Parse JSON string into object

    	var v = function (callbackdeff){
    		current_map = JSON.parse(replaceAll(response, "NaN", '""'));
    		console.log(current_map);
    		callbackdeff(current_map);
    	}; */

    	//v(function(holder){callback_(holder);})
    	before = true;

    //list_art = current
    //console.log(current_map[50][50][0]['contentId'][0]);
     /*d3.select('#i1').attr('src', '/wikiart-master/wikiart/images/'+current_map[50][50][0]['contentId'][0]);
     d3.select('#i2').attr('src', '/wikiart-master/wikiart/images/'+current_map[0][50][0]['contentId'][0]);
     d3.select('#i3').attr('src', '/wikiart-master/wikiart/images/'+current_map[0][0][0]['contentId'][0]);*/
     //callback();
 
 }

 function clear_divs()
 {
    d3.select("#chart2-style").text("");
      for (var i = 0; i < 4; i++)
      {
         d3.select('#p'+(i+1)+'_album').attr('src', "/blank.png"); 
          d3.select("#p"+(i+1)+"_album_artist").text("");
           d3.select("#p"+(i+1)+"_album_name").text("");
             d3.select("#p"+(i+1)+"_album_year").text("");
      }
 }

 function update_view_two(params)
 {
      for (var i = 0; i < params.length; i++)
      {
         d3.select('#p'+(i+1)+'_album').attr('src', '/data_scraping_actual/'+params[i]['coverpath_music']); 
          d3.select("#p"+(i+1)+"_album_artist").text(params[i]['artist_music']);
           d3.select("#p"+(i+1)+"_album_name").text(params[i]['album_music']);
             d3.select("#p"+(i+1)+"_album_year").text(params[i]['year_music']);
           

      }


              /*  d3.select('#p1_album').attr('src', '/data_scraping_actual/'+params[0]['coverpath_music']); 
                  d3.select('#p2_album').attr('src', '/data_scraping_actual/'+params[1]['coverpath_music']);
                  d3.select('#p3_album').attr('src', '/data_scraping_actual/'+params[2]['coverpath_music']);
                  d3.select('#p4_album').attr('src', '/data_scraping_actual/'+params[3]['coverpath_music']);

                  console.log(params[0]);

                  d3.select("#p1_album_artist").text(params[0]['artist_music']);
                  d3.select("#p2_album_artist").text(params[1]['artist_music']);
                  d3.select("#p3_album_artist").text(params[2]['artist_music']);
                  d3.select("#p4_album_artist").text(params[3]['artist_music']);

                  d3.select("#p1_album_name").text(params[0]['album_music']);
                  d3.select("#p2_album_name").text(params[1]['album_music']);
                  d3.select("#p3_album_name").text(params[2]['album_music']);
                  d3.select("#p4_album_name").text(params[3]['album_music']);

                  d3.select("#p1_album_year").text(params[0]['year_music']);
                  d3.select("#p2_album_year").text(params[1]['year_music']);
                  d3.select("#p3_album_year").text(params[2]['year_music']);
                  d3.select("#p4_album_year").text(params[3]['year_music']);*/



 }

  function clear_divs_three()
 {
    //d3.select("#chart2-style").text("");
      for (var i = 0; i < 4; i++)
      {
         d3.select('#f'+(i+1)+'_album').attr('src', "/blank.png"); 
          d3.select("#f"+(i+1)+"_album_artist").text("");
           d3.select("#f"+(i+1)+"_album_name").text("");
             d3.select("#f"+(i+1)+"_album_year").text("");
           d3.select("#f"+(i+1)+'_style').text("")

      }
 }

 function update_view_three(params)
 {
      for (var i = 0; i < params.length; i++)
      {
         d3.select('#f'+(i+1)+'_album').attr('src', '/data_scraping_actual/'+params[i]['coverpath_music']); 
          d3.select("#f"+(i+1)+"_album_artist").text(params[i]['artist_music']);
           d3.select("#f"+(i+1)+"_album_name").text(params[i]['album_music']);
             d3.select("#f"+(i+1)+"_album_year").text(params[i]['year_music']);
               d3.select("#f"+(i+1)+'_style').text(params[i]['genre_music'])
      }


              /*  d3.select('#p1_album').attr('src', '/data_scraping_actual/'+params[0]['coverpath_music']); 
                  d3.select('#p2_album').attr('src', '/data_scraping_actual/'+params[1]['coverpath_music']);
                  d3.select('#p3_album').attr('src', '/data_scraping_actual/'+params[2]['coverpath_music']);
                  d3.select('#p4_album').attr('src', '/data_scraping_actual/'+params[3]['coverpath_music']);

                  console.log(params[0]);

                  d3.select("#p1_album_artist").text(params[0]['artist_music']);
                  d3.select("#p2_album_artist").text(params[1]['artist_music']);
                  d3.select("#p3_album_artist").text(params[2]['artist_music']);
                  d3.select("#p4_album_artist").text(params[3]['artist_music']);

                  d3.select("#p1_album_name").text(params[0]['album_music']);
                  d3.select("#p2_album_name").text(params[1]['album_music']);
                  d3.select("#p3_album_name").text(params[2]['album_music']);
                  d3.select("#p4_album_name").text(params[3]['album_music']);

                  d3.select("#p1_album_year").text(params[0]['year_music']);
                  d3.select("#p2_album_year").text(params[1]['year_music']);
                  d3.select("#p3_album_year").text(params[2]['year_music']);
                  d3.select("#p4_album_year").text(params[3]['year_music']);*/



 }

 function update_view(params)
 {
  console.log('here')

        var contentid = params[0];
      var scores = params[1];
      var breakdown = params[2];
      var artists = params[3];
      var titles = params[4];
      var year = params[5];
      var style = params[6];

      for (var i =0; i < 4; i++)
      {
           if (i ==0)
        {
           d3.select('#i4').attr('src', '/blank.png'); 
             d3.select('#t4_artist').text("" );
      d3.select('#t4_title').text("" );
      d3.select('#t4_style').text("" );
      d3.select('#t4_year').text("" );
        }
        else
        {
          d3.select('#i'+i).attr('src', '/blank.png'); 
          d3.select('#t'+i+'_artist').text("");
          d3.select('#t'+i+'_title').text("");
          d3.select('#t'+i+'_style').text("");
          d3.select('#t'+i+'_year').text("");
        }
      }

      for (var i =0; i < contentid.length; i++)
      {
        if (i ==0)
        {
           d3.select('#i4').attr('src', '/wikiart-master/wikiart/images/'+contentid[0]); 
             d3.select('#t4_artist').text(artists[0] );
      d3.select('#t4_title').text(titles[0] );
      d3.select('#t4_style').text(style[0] );
      d3.select('#t4_year').text(year[0] );
        }
        else
        {
          d3.select('#i'+i).attr('src', '/wikiart-master/wikiart/images/'+contentid[i]); 
          d3.select('#t'+i+'_artist').text(artists[i] );
          d3.select('#t'+i+'_title').text(titles[i] );
          d3.select('#t'+i+'_style').text(style[i] );
          d3.select('#t'+i+'_year').text(year[i] );
        }
      }

      /*
      d3.select('#i4').attr('src', '/wikiart-master/wikiart/images/'+contentid[0]); 
      d3.select('#i1').attr('src', '/wikiart-master/wikiart/images/'+contentid[1]); 
       d3.select('#i2').attr('src', '/wikiart-master/wikiart/images/'+contentid[2]); 
       d3.select('#i3').attr('src', '/wikiart-master/wikiart/images/'+contentid[3]); 
      //  d3.select('#i3').attr('src', '/wikiart-master/wikiart/images/'+contentid[3]); 

         


     

      d3.select('#t1_artist').text(artists[1] );
      d3.select('#t1_title').text(titles[1] );
      d3.select('#t1_style').text(style[1] );
      d3.select('#t1_year').text(year[1] );

      d3.select('#t2_artist').text(artists[2] );
      d3.select('#t2_title').text(titles[2] );
      d3.select('#t2_style').text(style[2] );
      d3.select('#t2_year').text(year[2] );

      d3.select('#t3_artist').text(artists[2] );
      d3.select('#t3_title').text(titles[2] );
      d3.select('#t3_style').text(style[2] );
      d3.select('#t3_year').text(year[2] );

      console.log("testing -- for hcanges")



      d3.select('#album_artist').text(actual_JSON[path]["artist_music"]);
     d3.select('#album_name').text(actual_JSON[path]["album_music"]); 
     d3.select('#album_year').text(actual_JSON[path]["year_music"]); 
    d3.select('#album_genre').text(actual_JSON[path]["genre_music"]); 




     d3.select('#wiki').text(wiki_info[actual_JSON[path]["album_music"]] ); */
 }

  


 var callback_afterinit = function(holder){

      var params = find_min(current_map);
      var contentid = params[0];
      var scores = params[1];
      var breakdown = params[2];
      /*console.log(params)
      console.log(contentid)
      console.log(scores)
      console.log(breakdown)
      console.log('updating!'); */


           var params = find_min(current_map);
      var contentid = params[0];
      var scores = params[1];
      var breakdown = params[2];
      var artists = params[3];
      var titles = params[4];
      var year = params[5];
      var style = params[6];



      d3.select('#i4').attr('src', '/wikiart-master/wikiart/images/'+contentid[0]); 
      d3.select('#i1').attr('src', '/wikiart-master/wikiart/images/'+contentid[1]); 
       d3.select('#i2').attr('src', '/wikiart-master/wikiart/images/'+contentid[2]); 
      d3.select('#i3').attr('src', '/wikiart-master/wikiart/images/'+contentid[3]); 

         


       d3.select('#t4_artist').text(artists[0] );
      d3.select('#t4_title').text(titles[0] );
      d3.select('#t4_style').text(style[0] );
      d3.select('#t4_year').text(year[0] );

      d3.select('#t1_artist').text(artists[1] );
      d3.select('#t1_title').text(titles[1] );
      d3.select('#t1_style').text(style[1] );
      d3.select('#t1_year').text(year[1] );

      d3.select('#t2_artist').text(artists[2] );
      d3.select('#t2_title').text(titles[2] );
      d3.select('#t2_style').text(style[2] );
      d3.select('#t2_year').text(year[2] );

      d3.select('#t3_artist').text(artists[3] );
      d3.select('#t3_title').text(titles[3] );
      d3.select('#t3_style').text(style[3] );
      d3.select('#t3_year').text(year[3] );

      console.log("testing -- for hcanges")

      d3.select('#chart1-style').text("Top Paintings")



      d3.select('#album_artist').text(actual_JSON[path]["artist_music"]);
     d3.select('#album_name').text(actual_JSON[path]["album_music"]); 
     d3.select('#album_year').text(actual_JSON[path]["year_music"]); 
    d3.select('#album_genre').text(actual_JSON[path]["genre_music"]); 




     d3.select('#wiki').text(wiki_info[actual_JSON[path]["album_music"]] );

 };

var actual_JSON = 1;
function myCallback(result) {
  result = JSON.parse(result)
  actual_JSON = result
  path = Object.keys(actual_JSON)[0]
  d3.select('#album').attr("src", replaceAll('/data_scraping_actual/'+path,'//', '/'));
  var options = d3.select('#musiclist').on('change',onchange).selectAll("option")
	.data(Object.keys(actual_JSON)).enter().append('option').text(function (d) {  return actual_JSON[d]['artist_music'] + ' - '+ actual_JSON[d]['album_music'] + " " +actual_JSON[d]['year_music']; }).attr('value',(function(d){return d;}));

	afterInit(callback_afterinit,actual_JSON[path]['res']);


}
var before = false;

function perform(path){
  var path = path;
	d3.select('#album').attr("src", replaceAll('/data_scraping_actual/'+path,'//', '/'));
	return true;

}


function onchange() {
	selectValue = d3.select('#musiclist').property('value')
	//console.log(actual_JSON[selectValue]);
	path = selectValue;
	var v = perform(path);
	if (v)
	{
	before = false;
	afterInit(callback_afterinit, actual_JSON[path]['res']);

	}


};

var wiki_info;


var callback_afterinit_wiki = function(holder){ 
  //console.log(holder);
   wiki_info = holder;
  d3.select('#album_name').text(actual_JSON[path]["album_music"]); 
  d3.select('#wiki').text(wiki_info[actual_JSON[path]["album_music"]]);

};

function afterInit_wiki(callback_, path){
    //console.log(actual_JSON)
   // var path = "/analysis/res_res/"+path +'.json';
    //console.log(actual_JSON[Object.keys(actual_JSON)[1]]['coverpath']);
    //console.log(path);
    d3.json(path, function(data) {
      //console.log(data);
       wiki_info = data;
      //console.log('loaded new json_wiki');
      callback_(wiki_info);

        
  });}

  var style_dict;


  function style_loader(callback_, path){

    d3.json(path, function(data) {
      //console.log(data);
      style_dict = data;
      //console.log('loaded new json_wiki');
      callback_(style_dict);

        
  });}

  var lookup_title = [];

  var callback_style_loader = function(holder){ 

    var temp_list = holder['jazz']['list'];
    var counter = 0;
    var graph_holder = [];


    for(style in holder)
    {
      var style_ = style.replace('%26','--');
      var style_ = style_.replace('+', '_');
      var style_ = style_.replace('%2F','vv')
      lookup_title.push(style);
  //console.log(holder);
      graph_holder.push(c3.generate({
            bindto: "#pie_"+style_ ,
             padding: {
              top: 0,
              right: 0,
              bottom: 0,
            left: 0,
            },
            data: {
                ids:[style],
                columns: holder[style]['list'],
                type : 'donut',
                onmouseover:
                 function (d, i) { 
                  //console.log(d["id"]);
                  console.log(i);
                  console.log(d);
                  var dict_temp = style_dict[style][d["id"]]
                  console.log(style_dict[style][d["id"]]); 
                  update_view_two(style_dict[style][d["id"]]);
                   d3.select("#chart2-style").text( d["id"] + " in " + style +" album covers");
                },
                onmouseout: function (d, i) { 
                   console.log("mouseover");
                  clear_divs() }
            },
            donut: {
                id: style,
                title: style
            },
             legend: {
              show: false
            },
            onmouseover:
                function (d) { 
                  //console.log(d["id"]);
                   style = this.selectChart[0][0].id.replace("pie_","");
                   style = style.replace('_','+')
                   style = style.replace('--', '%26')
                   style = style.replace('vv','%2F')

                  console.log(typeof(this.selectChart[0][0]))
                  console.log(this.selectChart[0][0].id);
                  //console.log(d);
                },
          axis: {
              y: {
                  padding: {top: 0, bottom: 0}
              },
              x: {
                  padding: {top: 0, bottom: 0},
                  show: false
              }
          },
          color: {
            pattern: ["#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E","#3E718E"]
            
          }
        }));
      counter = counter +1;
    } 


};

var year_chart;

 function year_chart_loader(callback_, path){

    d3.json(path, function(data) {
      //console.log(data);
      year_chart = data;
      //console.log('loaded new json_wiki');
      callback_(year_chart);

        
  });}

    function year_chart_loader_callback(data)
{
  //console.log(data);

  data["x_axis"].unshift('setosa')
  data["y_axis"].unshift('setosa_x')
  var colors = ["#cae1ff","#8b1c62","#00eeee","#c6e2ff","#ee7621","#9f79ee","#548b54","#525252","#d6d6d6","#fffacd","#7b68ee","#eecbad","#00fa9a","#bfefff","#db7093","#8b636c","#5c5c5c","#cd96cd","#eee0e5","#8b7d7b","#8ee5ee","#ff7f24","#43cd80","#8deeee","#eeaeee","#cdba96","#ffa54f","#6e7b8b","#68838b","#666666","#ff82ab","#d15fee","#90ee90","#ffe4b5","#c9c9c9","#00868b","#ff3030","#ff7f50","#bababa","#424242","#cdc0b0","#737373","#8db6cd","#8b5a2b","#080808","#b2dfee","#cd00cd","#cd8c95","#ffc0cb","#cd1076","#eee685","#838b8b","#63b8ff","#9acd32","#eedfcc","#5d478b","#ee9572","#00688b","#5e5e5e","#7a67ee","#828282","#cdc673","#cd0000","#b22222","#636363","#121212","#ff6a6a","#b452cd","#858585","#d2691e","#e0e0e0","#00f5ff","#ee82ee","#bf3eff","#20b2aa"];
  //console.log(data["y_real"].range());

var chart = c3.generate({
    bindto:"#chart_scatter",
    data: {
        xs: {
            setosa: 'setosa_x'
        },
        // iris data from R
        columns: [
            data["x_axis"],
            data["y_axis"]],
        type: 'scatter',
            color: 
        function(color, i){return colors[i.x];},
        onmouseover: function (d) {
            console.log(d);
            //console.log(data["y_real"][d.x])
            console.log(data["listings"][d.value]);
            console.log(data["y_real"][d.x]);
            console.log(data["listings"][d.value][data["y_real"][d.x]]);
            update_view_three(data["listings"][d.value][data["y_real"][d.x]]);
            d3.select("#chart_scatter_over_title").text(data["y_real"][d.x] + " from the "+ d.value+'s')
        },
        onmouseout:function(d)
        {
          clear_divs_three()
          d3.select("#chart_scatter_over_title").text("")
        }
    },
    axis: {
      type:'categorical',
      x:{
                  show:false
                },
        y: {
            label: 'Years',
            tick: {
                fit: false
            }
        }},
    point: {
    r: function(d) { 
      console.log(d);
       return data["dot_size_rev"][d.value][data["y_real"][d.x]] * 75;
    }
    },
    legend: {
        show: false
    }
});
}




  loadJSON(myCallback,"/analysis/res_res/main.json");
  afterInit_wiki(callback_afterinit_wiki, "/analysis/wiki/final.json");
  style_loader(callback_style_loader, '/analysis/res_res/genre_agg.json');

  year_chart_loader(year_chart_loader_callback,'/analysis/res_res/year_chart.json' );








   
  </script>
 
</body>
</html>
